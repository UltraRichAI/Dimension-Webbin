<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mis Cursos â€” Panel Estudiantil</title>
  <style>
    :root{
      --accent:#0b6cf6;
      --card-bg:#ffffff;
      --muted:#666;
      --maxw:1000px;
      --radius:12px;
      --shadow: 0 6px 18px rgba(10,10,20,0.08);
    }
    *{box-sizing:border-box;font-family:Inter,system-ui,Segoe UI,Arial,Helvetica,sans-serif}
    body{margin:0;background:#f4f7fb;color:#123;padding:26px;display:flex;justify-content:center}
    .container{width:100%;max-width:var(--maxw)}
    header{display:flex;gap:12px;align-items:center;margin-bottom:18px}
    header img.logo{width:48px;height:48px;border-radius:10px;object-fit:cover}
    header h1{font-size:20px;margin:0}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px}
    .card{background:var(--card-bg);padding:14px;border-radius:var(--radius);box-shadow:var(--shadow)}
    .course-title{display:flex;align-items:center;gap:10px;font-weight:600}
    .meta{color:var(--muted);font-size:13px;margin-top:6px}
    ul.weeks{list-style:none;padding:0;margin:12px 0 0 0}
    ul.weeks li{display:flex;justify-content:space-between;align-items:center;padding:8px;border-radius:8px}
    .link{font-size:14px;text-decoration:none;color:var(--accent)}
    .small{font-size:13px;color:var(--muted)}
    .btn{display:inline-block;padding:8px 10px;border-radius:10px;background:transparent;border:1px solid var(--accent);color:var(--accent);text-decoration:none;font-size:13px}
    .top-actions{display:flex;gap:10px;margin-left:auto}
    footer{margin-top:18px;color:var(--muted);font-size:13px;text-align:center}
    .file-list{display:flex;flex-direction:column;gap:6px;margin-top:8px}
    .file-item{display:flex;justify-content:space-between;gap:10px;padding:8px;border-radius:8px;background:#fbfdff}
    @media (max-width:520px){
      header{flex-direction:column;align-items:flex-start}
      .top-actions{margin-left:0}
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <img class="logo" src="https://raw.githubusercontent.com/your-repo-placeholder/logo-placeholder/main/icon.png" alt="logo" />
      <div>
        <h1>Mi Panel de Cursos</h1>
        <div class="small">Organiza tus cursos, semanas y tareas. Edita <code>courses.json</code> en el repositorio para actualizar.</div>
      </div>
      <div class="top-actions" aria-hidden>
        <a class="btn" href="https://github.com" target="_blank" rel="noopener">Ir a GitHub</a>
      </div>
    </header>

    <main id="main">
      <div id="loading" class="small">Cargando cursosâ€¦</div>
      <div id="grid" class="grid" style="display:none"></div>
    </main>

    <footer>
      Hecho por ti Â· Sitio estÃ¡tico Â· Sube archivos al repo y enlÃ¡zalos desde <code>courses.json</code>
    </footer>
  </div>

  <script>
    async function load() {
      try {
        const resp = await fetch('./courses.json?t=' + Date.now());
        if(!resp.ok) throw new Error('No se pudo cargar courses.json');
        const data = await resp.json();
        document.getElementById('loading').style.display = 'none';
        const grid = document.getElementById('grid');
        grid.style.display = 'grid';
        if(!Array.isArray(data.courses) || data.courses.length===0){
          grid.innerHTML = '<div class="card">No hay cursos. Edita <code>courses.json</code> en tu repo para aÃ±adirlos.</div>';
          return;
        }
        data.courses.forEach(course=>{
          const card = document.createElement('div'); card.className='card';
          const title = document.createElement('div'); title.className='course-title';
          title.innerHTML = `<span style="font-size:18px">${course.icon||'ðŸ“˜'}</span><div>
            <div>${course.name}</div>
            <div class="meta">${course.code || ''} Â· ${course.professor||''}</div>
          </div>`;
          card.appendChild(title);

          const list = document.createElement('ul'); list.className='weeks';
          if(Array.isArray(course.weeks) && course.weeks.length){
            course.weeks.forEach(w=>{
              const li = document.createElement('li');
              li.innerHTML = `<div><strong>${w.title}</strong><div class="small">${w.desc||''}</div></div>`;
              const right = document.createElement('div');
              if(Array.isArray(w.files) && w.files.length){
                const fileWrap = document.createElement('div'); fileWrap.className='file-list';
                w.files.forEach(f=>{
                  const fi = document.createElement('div'); fi.className='file-item';
                  const name = document.createElement('div'); name.textContent = f.name;
                  const a = document.createElement('a'); a.href = f.url; a.target='_blank'; a.className='link'; a.textContent='Abrir';
                  fi.appendChild(name); fi.appendChild(a);
                  fileWrap.appendChild(fi);
                });
                right.appendChild(fileWrap);
              } else {
                const a = document.createElement('a'); a.href='#'; a.className='small'; a.textContent='Sin archivos';
                right.appendChild(a);
              }
              li.appendChild(right);
              list.appendChild(li);
            });
          } else {
            const empty = document.createElement('div'); empty.className='small'; empty.textContent='AÃºn no hay semanas';
            list.appendChild(empty);
          }

          card.appendChild(list);
          grid.appendChild(card);
        });
      } catch (err) {
        document.getElementById('loading').textContent = 'Error: ' + err.message;
      }
    }
    load();
  </script>
</body>
</html>
